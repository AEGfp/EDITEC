<html lang="es">
<head>
    <meta charset="UTF-8" />
    <title>Reporte de Inscripciones</title>
    <style>
        body { font-family: DejaVu Sans, sans-serif; }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 1em;
            font-size: 1rem;
        }
        th, td {
            padding: 8px;
            border: 1px solid #000;
            text-align: left;
        }
        th {
            background-color: #eee;
        }
        h2, h3 {
            margin-bottom: 0.3em;
        }
        tbody tr:nth-child(odd) {
            background-color: #f9f9f9;
        }
    </style>
</head>
<body>
    <h2>
      Reporte de Inscripciones 
      {% if estado_filtro %} - Estado: {{ estado_filtro|capfirst }} {% endif %}
      {% if fecha_desde %} - Desde: {{ fecha_desde }} {% endif %}
      {% if fecha_hasta %} - Hasta: {{ fecha_hasta }} {% endif %}
      {% if id_tutor %} - Tutor ID: {{ id_tutor }} {% endif %}
      {% if id_infante %} - Infante ID: {{ id_infante }} {% endif %}
    </h2>

    <table>
      <tr>
        <th>Estado</th>
        <th>Cantidad</th>
      </tr>
      {% for item in resumen_estados %}
      <tr>
        <td>{{ item.estado|capfirst }}s</td>
        <td>{{ item.cantidad }}</td>
      </tr>
      {% endfor %}
      <tr>
        <td><strong>Total</strong></td>
        <td><strong>{{ total }}</strong></td>
      </tr>
    </table>

    <h3>Detalles de Inscripciones {% if estado_filtro %} {{ estado_filtro|capfirst }} {% endif %}</h3>
    <table>
        <thead>
            <tr>
                <th>Nº</th>
                <th>Infante</th>
                <th>Tutor</th>
                <th>Fecha de Inscripción</th>
                <th>Usuario Revisor</th>
                <th>Fecha de Revisión</th>
                <th>Observaciones</th>
            </tr>
        </thead>
        <tbody>
            {% for inscripcion in detalles %}
            <tr>
                <td>{{forloop.counter}}</td>
                <td>{{ inscripcion.nombre_infante }}</td>
                <td>{{ inscripcion.nombre_tutor }}</td>
                <td>{{ inscripcion.fecha_inscripcion }}</td>
                <td>{{ inscripcion.nombre_usuario }}</td>
                <td>{{ inscripcion.fecha_revision }}</td>
                <td>{{ inscripcion.observaciones|default:"-" }}</td>
            </tr>
            {% empty %}
            <tr><td colspan="6" style="text-align:center;">No hay inscripciones para mostrar.</td></tr>
            {% endfor %}
        </tbody>
    </table>
</body>
</html>
